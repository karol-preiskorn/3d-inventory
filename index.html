<html>

<body>
    <canvas
        width="600px"
        height="400px"
        id="c"
    ></canvas>
    <script type="importmap">{
	"imports": {
		"three": "https://threejs.org/build/three.module.js",
        "index": "https://localhost/index.js"
	}
}</script><!-- Remove this when import maps will be widely supported -->
    <script
        async
        src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"
    ></script>
    <script
        type="module"
        src="index.js"
    ></script>

    <script type="module">

        import * as THREE from 'three'
        // import {OrbitControls} from 'three/addons/controls/OrbitControls.js';

        function main() {
            const canvas = document.querySelector('#c')
            const renderer = new THREE.WebGLRenderer({ canvas })

            const fov = 100
            const aspect = 2  // the canvas default
            const near = 0.1
            const far = 5
            const camera = new THREE.PerspectiveCamera(fov, aspect, near, far)
            camera.position.z = 2

            const scene = new THREE.Scene()

            const boxWidth = 1
            const boxHeight = 1
            const boxDepth = 1
            const geometry = new THREE.BoxGeometry(boxWidth, boxHeight, boxDepth)

            const material = new THREE.MeshPhongMaterial({ color: 0x44aa88 })  // greenish blue

            // const texture = new THREE.TextureLoader().load("img/grid.png")
            // material.map = texture
            const envTexture = new THREE.CubeTextureLoader().load(["img/px_50.png", "img/nx_50.png", "img/py_50.png", "img/ny_50.png", "img/pz_50.png", "img/nz_50.png"])
            envTexture.mapping = THREE.CubeReflectionMapping
            material.envMap = envTexture


            const cube = new THREE.Mesh(geometry, material)
            scene.add(cube)

            const color = 0xFFFFFF
            const intensity = 1
            const light = new THREE.DirectionalLight(color, intensity)
            light.position.set(-1, 2, 4)
            scene.add(light)

            function render(time) {
                time *= 0.0003  // convert time to seconds

                cube.rotation.x = time
                cube.rotation.y = time / 2

                renderer.render(scene, camera)

                requestAnimationFrame(render)
            }
            requestAnimationFrame(render)

        }

        main();

    </script>
</body>

</html>